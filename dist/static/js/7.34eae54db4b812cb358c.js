webpackJsonp([7],{BepB:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("woOf"),n=t.n(r),l=t("Xxa5"),o=t.n(l),s=t("exGp"),c=t.n(s),i=t("vMJZ"),u=t("msXN"),d={mixins:[u.b,u.a],data:function(){return{formLabelWidth:"60px",searchForm:{schoolid:"",gradeid:"",classid:"",nickname:""},tableData:[],tableHeaders:[{label:"id",prop:"id"},{label:"姓名",prop:"nickname"},{label:"手机号",prop:"phone"},{label:"学校",prop:"school.name"},{label:"年级",prop:"grade.name"},{label:"班级",prop:"class.name"}],currentPage:1}},computed:{params:function(){return{page:this.currentPage,pageSize:20}}},methods:{create:function(){this.$router.push({name:"account-create"})},pageChange:function(e){var a=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("11111"),a.currentPage=e,a.find();case 3:case"end":return t.stop()}},t,a)}))()},find:function(){var e=this;return c()(o.a.mark(function a(){var t,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=n()({},e.searchForm,e.params),t=e.check(t),a.next=4,i.a.getAllItems(t);case 4:r=a.sent,e.tableData=r,console.log(r);case 7:case"end":return a.stop()}},a,e)}))()},handleDel:function(e,a){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.delete(e);case 2:a.sent,t.find(),t.$message.success("删除成功!");case 5:case"end":return a.stop()}},a,t)}))()},handleEdit:function(e){this.$router.push({name:"account-edit",params:{userId:e.id}})},check:function(e){for(var a in e)e[a]||delete e[a];return e}},mounted:function(){this.find()}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{label:"学校"}},[t("el-select",{attrs:{clearable:"","label-width":e.formLabelWidth,placeholder:"请输入学校",size:"small"},on:{change:e.handleSchoolChange},model:{value:e.searchForm.schoolid,callback:function(a){e.$set(e.searchForm,"schoolid",a)},expression:"searchForm.schoolid"}},e._l(e.commonSchool,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"年级"}},[t("el-select",{attrs:{clearable:"",placeholder:"请输入年级",size:"small"},on:{change:e.handleGradeChange},model:{value:e.searchForm.gradeid,callback:function(a){e.$set(e.searchForm,"gradeid",a)},expression:"searchForm.gradeid"}},e._l(e.filterGradeBySchoolid(e.searchForm.schoolid),function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"班级"}},[t("el-select",{attrs:{clearable:"",placeholder:"请输入班级",size:"small "},model:{value:e.searchForm.classid,callback:function(a){e.$set(e.searchForm,"classid",a)},expression:"searchForm.classid"}},e._l(e.filterClassByGrade(e.searchForm.gradeid),function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{attrs:{placeholder:"请输入姓名",size:"small"},model:{value:e.searchForm.nickname,callback:function(a){e.$set(e.searchForm,"nickname",a)},expression:"searchForm.nickname"}})],1),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.find()}}},[e._v("查询")])],1),e._v(" "),t("el-row",[t("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(a){return e.create()}}},[e._v("创建")])],1),e._v(" "),t("base-table",{attrs:{currentPage:e.currentPage,tableData:e.tableData,tableHeaders:e.tableHeaders},on:{"page-change":e.pageChange}},[t("el-table-column",{staticClass:"action",attrs:{slot:"action",fixed:"right",label:"操作"},slot:"action",scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDel(a.row.id,a.$index)}}},[t("span",{staticStyle:{color:"red"}},[e._v("删除")])])]}}])})],1)],1)},staticRenderFns:[]};var h=t("VU/8")(d,m,!1,function(e){t("XbSQ")},null,null);a.default=h.exports},XbSQ:function(e,a){}});
//# sourceMappingURL=7.34eae54db4b812cb358c.js.map