webpackJsonp([2],{"0TeV":function(e,r){},cY0x:function(e,r){},"l/J/":function(e,r,t){"use strict";var a=t("Xxa5"),n=t.n(a),s=t("Dd8w"),o=t.n(s),l=t("exGp"),i=t.n(l),c=(t("uXiC"),t("vMJZ")),u=t("msXN"),m={props:["id"],mixins:[u.b,u.a],data:function(){return{formLabelWidth:"100px",dialogTableVisible:!1,dialogFormVisible:!1,roles:[{name:"校长",key:1},{name:"年级长",key:2},{name:"班主任",key:3}],form:{username:"",password:"",phone:"",nickname:"",type:"",schoolid:"",gradeid:"",classid:""},rules:{username:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},type:{required:!0,message:"请输入角色",trigger:"blur"},nickname:{required:!0,message:"请输入姓名",trigger:"blur"},schoolid:{required:!0,message:"学校",trigger:"blur"}}}},computed:{method:function(){return this.id?"update":"create"},params:function(){return{page:this.currentPage,pageSize:20}}},methods:{onSubmit:function(e){var r=this;return i()(n.a.mark(function e(){var t,a,s,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,r.$refs.form.validate(function(e){t=e});case 3:if(e.sent,!t){e.next=18;break}if(a=r.id?"update":"create",s=[],"create"!=a){e.next=14;break}return l=new c.a(o()({},r.form)),e.next=11,l[a]();case 11:s=e.sent,e.next=17;break;case 14:return e.next=16,c.a.edit(r.form);case 16:s=e.sent;case 17:200==s.code?r.$router.push({name:"account-list"}):r.$message.error(s.data.message);case 18:case"end":return e.stop()}},e,r)}))()},rollback:function(){var e=this;return i()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.$router.push({name:"account-list"});case 1:case"end":return r.stop()}},r,e)}))()},getUserDetail:function(){var e=this;return i()(n.a.mark(function r(){var t,a,s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.getDetail(e.id);case 2:t=r.sent,a=0==t.gradeid?"":t.gradeid,s=0==t.classid?"":t.classid,e.form={username:t.username,password:t.username,phone:t.phone,nickname:t.nickname,id:t.id,type:t.type,schoolid:t.schoolid,gradeid:a,classid:s};case 6:case"end":return r.stop()}},r,e)}))()}},mounted:function(){this.id&&this.getUserDetail(this.id)}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[[t("p",{staticClass:"title"},[e._v("账号信息")]),e._v(" "),t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"type",label:"角色"}},[t("el-select",{attrs:{clearable:"",placeholder:"选择角色"},model:{value:e.form.type,callback:function(r){e.$set(e.form,"type",r)},expression:"form.type"}},e._l(e.roles,function(e){return t("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{prop:"schoolid",label:"学校"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择学校"},on:{change:e.SchoolChange},model:{value:e.form.schoolid,callback:function(r){e.$set(e.form,"schoolid",r)},expression:"form.schoolid"}},e._l(e.commonSchool,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"年级"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择年级"},on:{change:e.GradeChange},model:{value:e.form.gradeid,callback:function(r){e.$set(e.form,"gradeid",r)},expression:"form.gradeid"}},e._l(e.filterGradeBySchoolid(e.form.schoolid),function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"班级"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择班级"},model:{value:e.form.classid,callback:function(r){e.$set(e.form,"classid",r)},expression:"form.classid"}},e._l(e.filterClassByGrade(e.form.gradeid),function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],e._v(" "),[t("p",{staticClass:"title"},[e._v("用户信息")]),e._v(" "),t("el-form-item",{attrs:{prop:"nickname",label:"姓名"}},[t("el-input",{model:{value:e.form.nickname,callback:function(r){e.$set(e.form,"nickname",r)},expression:"form.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{model:{value:e.form.phone,callback:function(r){e.$set(e.form,"phone",r)},expression:"form.phone"}})],1)],e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.onSubmit(e.form)}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.rollback}},[e._v("取 消")])],1)],2)],1)},staticRenderFns:[]};var f=t("VU/8")(m,d,!1,function(e){t("cY0x")},null,null);r.a=f.exports},wua1:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={name:"edit-screen",components:{EditForm:t("l/J/").a},computed:{id:function(){return this.$route.params.userId}},methods:{handleSuccess:function(){this.$router.back()}}},n={render:function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"edit-screen"},[r("edit-form",{attrs:{id:this.id},on:{"save-success":this.handleSuccess}})],1)},staticRenderFns:[]};var s=t("VU/8")(a,n,!1,function(e){t("0TeV")},null,null);r.default=s.exports}});
//# sourceMappingURL=2.f645629cd333e18ea79e.js.map